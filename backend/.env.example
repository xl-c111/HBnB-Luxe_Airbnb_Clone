# HBnB Evolution - Environment Configuration Template
# Copy this file to .env and fill in your actual values
# WARNING: Never commit .env to git - only commit this .env.example file

# ===================================
# Database Configuration (Local Development)
# ===================================
# MySQL database credentials for local development
DB_USER=your_tidb_username
DB_PASSWORD=your_tidb_password
DB_HOST=gateway01.ap-southeast-1.prod.aws.tidbcloud.com
DB_NAME=test

# Full database connection URI for local development
# Format: mysql+pymysql://USER:PASSWORD@HOST:PORT/DATABASE
SQLALCHEMY_DATABASE_URI='mysql+pymysql://your_tidb_username:your_tidb_password@gateway01.ap-southeast-1.prod.aws.tidbcloud.com:4000/test'
DATABASE_URL='mysql+pymysql://your_tidb_username:your_tidb_password@gateway01.ap-southeast-1.prod.aws.tidbcloud.com:4000/test'

# ===================================
# Security Configuration
# ===================================
# IMPORTANT: Generate unique secure keys for each environment
# Generate with: python3 -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=change-this-to-a-random-secret-key
JWT_SECRET_KEY=change-this-to-a-different-random-secret-key

# ===================================
# Local Development Database Auto-Setup
# ===================================
# Set to 'true' ONLY if you want automatic database/table creation on startup
# Useful for quick local setup, but NOT recommended for production
# For production: ALWAYS set to 'false' and manage DB with migrations
HBNB_CREATE_DB_ON_STARTUP=false

# ===================================
# Flask Environment
# ===================================
# Options: development, production, testing
FLASK_ENV=development

# ===================================
# CORS Configuration
# ===================================
# Frontend URL for CORS (required when using credentials)
# Local development (Vite): http://localhost:5173
# Production: your frontend CloudFront URL
FRONTEND_URL=http://localhost:5173

# ===================================
# Stripe Configuration
# ===================================
# Get your test keys from: https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# ===================================
# Production Configuration
# ===================================
# For production deployment with TiDB Serverless, set these instead:
# DATABASE_URL=mysql+pymysql://user:password@gateway01.ap-southeast-1.prod.aws.tidbcloud.com:4000/test
# SECRET_KEY=<64-char hex generated with secrets.token_hex(32)>
# JWT_SECRET_KEY=<different 64-char hex generated with secrets.token_hex(32)>
# FLASK_ENV=production
# FRONTEND_URL=https://your-cloudfront-distribution.cloudfront.net
# HBNB_CREATE_DB_ON_STARTUP=false

# ===================================
# Test Database Configuration
# ===================================
# Tests automatically use in-memory SQLite (no configuration needed)
# This ensures fast, isolated tests without requiring MySQL

# ===================================
# Setup Instructions
# ===================================
# Local Development:
# 1. Copy this file: cp .env.example .env
# 2. Generate secure keys: python3 -c "import secrets; print(secrets.token_hex(32))"
# 3. Update SECRET_KEY and JWT_SECRET_KEY in .env with the generated values
# 4. Add your Stripe test keys to .env
# 5. Make sure MySQL is running: brew services start mysql
# 6. Create database: mysql -u root < docs/hbnb_db.sql
# 7. Add sample data: python3 ../scripts/add_sample_data.py
# 8. Run the application: python3 run.py
#
# Production Deployment:
# 1. Set DATABASE_URL to your TiDB endpoint (not SQLALCHEMY_DATABASE_URI)
# 2. Generate NEW secret keys (never reuse development keys!)
# 3. Set FLASK_ENV=production
# 4. Set FRONTEND_URL to your CloudFront frontend URL
# 5. Set HBNB_CREATE_DB_ON_STARTUP=false
# 6. Use your production Stripe keys (sk_live_... and pk_live_...)
